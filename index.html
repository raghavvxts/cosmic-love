<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Vedanshi â™Š</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  overflow:hidden;
  background:black;
  font-family:'Poppins',sans-serif;
  color:#ffb6d9;
}

canvas{position:fixed;top:0;left:0;}

#fadeBlack{
  position:fixed;
  inset:0;
  background:black;
  opacity:1;
  transition:opacity 3s ease;
  z-index:10;
}

#ui{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  opacity:0;
  transition:opacity 3s ease;
  z-index:5;
}

#photo{
  width:240px;
  height:240px;
  border-radius:50%;
  background:url("us2.jpg") center/cover no-repeat;
  margin-bottom:30px;
  box-shadow:0 0 100px rgba(255,105,180,1);
}

h1{
  font-family:'Playfair Display',serif;
  font-size:50px;
  letter-spacing:2px;
}

#movieTitle{
  position:absolute;
  bottom:10%;
  width:100%;
  text-align:center;
  font-size:60px;
  font-family:'Playfair Display',serif;
  letter-spacing:3px;
  opacity:0;
  transition:opacity 4s ease;
  z-index:6;
}
</style>
</head>
<body>

<div id="fadeBlack"></div>

<div id="ui">
  <div id="photo"></div>
  <h1>Will you be my prom date?</h1>
</div>

<div id="movieTitle">A Cosmic Love Story</div>

<audio id="music" src="song.mp3"></audio>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/postprocessing/EffectComposer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/postprocessing/RenderPass.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/postprocessing/UnrealBloomPass.js"></script>

<script>
let scene=new THREE.Scene();
let camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,0.1,5000);
let renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth,window.innerHeight);
document.body.appendChild(renderer.domElement);

camera.position.z=600;

/* BLOOM */
const composer=new THREE.EffectComposer(renderer);
composer.addPass(new THREE.RenderPass(scene,camera));
const bloom=new THREE.UnrealBloomPass(
  new THREE.Vector2(window.innerWidth,window.innerHeight),
  1.5,0.5,0.85
);
composer.addPass(bloom);

/* STARS */
function createStars(count,spread,size,color){
  const geo=new THREE.BufferGeometry();
  const pos=[];
  for(let i=0;i<count;i++){
    pos.push(
      (Math.random()-0.5)*spread,
      (Math.random()-0.5)*spread,
      (Math.random()-0.5)*spread
    );
  }
  geo.setAttribute('position',new THREE.Float32BufferAttribute(pos,3));
  const mat=new THREE.PointsMaterial({size:size,color:color});
  const stars=new THREE.Points(geo,mat);
  scene.add(stars);
  return stars;
}

let outerStars=createStars(50000,3000,2,0xff99cc);
let haloStars=createStars(30000,1000,3,0xff4da6);

/* CUPID */
const bow=new THREE.Mesh(
  new THREE.TorusGeometry(120,5,16,100,Math.PI),
  new THREE.MeshBasicMaterial({color:0xff4da6})
);
scene.add(bow);

let arrow=new THREE.Mesh(
  new THREE.CylinderGeometry(5,5,400,16),
  new THREE.MeshBasicMaterial({color:0xffffff})
);
arrow.rotation.z=Math.PI/2;
arrow.position.set(-1500,0,0);
scene.add(arrow);

let time=0;
let fired=false;
let impact=false;
let slowMotion=false;

/* STAR BURST */
function burst(){
  for(let i=0;i<600;i++){
    let star=new THREE.Mesh(
      new THREE.SphereGeometry(6,8,8),
      new THREE.MeshBasicMaterial({color:0xff4da6})
    );
    star.position.set(0,0,0);
    scene.add(star);

    let dx=(Math.random()-0.5)*80;
    let dy=(Math.random()-0.5)*80;
    let dz=(Math.random()-0.5)*80;

    let life=setInterval(()=>{
      star.position.x+=dx;
      star.position.y+=dy;
      star.position.z+=dz;
      star.material.opacity-=0.02;
      star.material.transparent=true;
      if(star.material.opacity<=0){
        scene.remove(star);
        clearInterval(life);
      }
    },30);
  }
}

/* ANIMATION */
function animate(){
  requestAnimationFrame(animate);

  let speed=slowMotion?0.2:1;
  time+=0.01*speed;

  camera.position.x=Math.sin(time*0.2)*800;
  camera.lookAt(0,0,0);

  haloStars.rotation.y+=0.003*speed;
  outerStars.rotation.y+=0.001*speed;

  bow.scale.set(1+Math.sin(time*3)*0.1,1+Math.sin(time*3)*0.1,1);

  if(time>5 && !fired){
    fired=true;
  }

  if(fired && arrow.position.x<0){
    arrow.position.x+=40*speed;
  }

  if(fired && arrow.position.x>=0 && !impact){
    impact=true;
    slowMotion=true;
    burst();
    setTimeout(()=>{
      slowMotion=false;
      document.getElementById("fadeBlack").style.opacity=1;
      setTimeout(()=>{
        document.getElementById("ui").style.opacity=1;
        document.getElementById("movieTitle").style.opacity=1;
        document.getElementById("fadeBlack").style.opacity=0;
      },2000);
    },1500);
  }

  composer.render();
}
animate();

/* fade in from black at start */
setTimeout(()=>{
  document.getElementById("fadeBlack").style.opacity=0;
  document.getElementById("music").play();
},1000);
</script>

</body>
</html>
